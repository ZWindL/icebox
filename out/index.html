<!DOCTYPE html>
<html>
    <head id='head'>
        <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
        <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
        <script>
            $.getJSON('./config.json')
            .done(function(config){
                document.config = config;
                $('#head').append($('<title>').text(config['name']));
                $('#name').text(config['name']);
                $.each(config['style'], function(_, link){
                    $('#head').append($('<link>').attr({
                        "rel":"stylesheet",
                        "type":"text/css",
                        "href":link
                    }));
                })
            })
        </script>
    </head>
    <body>
        <style scoped>
            ul {
                font-size: 1.2em;
            }
            h1 {
                font-size: 3.6em;
            }
            .it {
                font-size: 0.5em;
                float: right;
            }
        </style>
        <h1><strong id='name'>icebox</strong></h1>
        <ul id='list'></ul>
        <script>
            $.getJSON('./blog.json')
            .done(function(items){
                if(!items){
                    $('#list').append(
                        $('<li>').text('作者太懒，一篇文章都没有...')
                    );
                    return;
                };
                $.each(items.reverse(), function(i, item){
                    $('#list').append(
                        $('<li>').html(
                            $('<a>').text(item).attr('href', './mark.html?'+(items.length - i)+'#'+item)
                        )
                    );
                })
            })
            .fail(function(){
                $('#list').append(
                    $('<li>').text('貌似item.json加载错误了？')
                )
            });
        </script>
    </body>
</html>
