<!DOCTYPE html>
<html>
    <head id='head'>
        <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
        <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
        <script src='./static/marked/lib/marked.js'></script>
    </head>
    <body>
        <div id="mark"></div>
        <div id="disqus_thread"></div>
        <script>
            $.getJSON('./config.json')
            .done(function(config){
                config.name = document.location.search.substring(1)||config.name;
                $('#head').append($('<title>').text(config.name));
                $.each(config.style, function(_, link){
                    $('#head').append($('<link>').attr({
                        "rel":"stylesheet",
                        "type":"text/css",
                        "href":link
                    }));
                });
                $.get('./'+config.mark+'/'+config.name+'.md')
                .success(function(text){
                    $('#mark').append(marked(text));
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = config.disqus; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {{
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    }})();
                })
                .fail(function(){
                    $('#mark').append(marked("# ( ・_・)"))
                });
            })
        </script>
    </body>
</html>
